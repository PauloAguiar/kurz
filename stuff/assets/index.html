<!DOCTYPE HTML>
<html>
    <head>
        <title>kurz.go</title>
        <link rel="stylesheet" type="text/css" href="css/style.css"> 

        <link href='http://fonts.googleapis.com/css?family=Terminal+Dosis:300'
        rel='stylesheet' type='text/css'>

        <script type="text/javascript"
            src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
        </script>
    </head>
    <body>
        <script type="text/javascript">

            var MONTHNAMES = new Array("Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                        "Jul", "Aug", "Sep", "Oct", "Nov", "Dec");
            function formatDate(d){
                return d.getDate() + " " + MONTHNAMES[d.getMonth()] + " "
                    + d.getFullYear();
            }
            function formatURL(url){
                var clean = url.replace("http://", "");
                clean = clean.replace("https://", "");
                clean = clean.substr(0, 52);
                return "<a href=\"" + url +"\">" 
                       + clean
                       + "</a>";
            }

            $(document).ready(function() {
                    $.getJSON("/latest/25", function( obj ) { 
                        var allUrls = obj["urls"];
                        for (var i = 0; i < allUrls.length; i++) {
                        var kurl = allUrls[i];

                        var d = new Date(kurl["CreationDate"] / 1000000);
                        $("table").append( 
                            "<tr>" 
                            + "<td>" + formatURL(kurl["ShortUrl"]) + "</td>"
                            + "<td>" + formatURL(kurl["LongUrl"]) + "</td>"
                            + "<td>" + formatDate(d) + "</td>"
                            + "<td>" + kurl["Clicks"] + "</td>"
                            + "</tr>");
                        } 
                        });
                    });
        </script>
        <div class="box">
            <table border="1">
                <colgroup>
                    <col width="80">
                    <col width="500">
                    <col width="80">
                    <col width="50">
                </colgroup>
                <tr>
                    <th>ShortUrl</th>
                    <th>LongUrl</th>
                    <th>CreationDate</th>
                    <th>Clicks</th>
                    <tr>
                    </table>
                </div>
               <div style="float:right;">powered by 
                            <a href="https://github.com/fs111/kurz.go">kurz.go</a> made 
                             by <a href="http://kel.pe/">fs111</a><div>
            </body>
        </html>
